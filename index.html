<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Equation Solver</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        h1 {
            font-size: 2em;
        }

        .score-container {
            display: inline-block;
            padding: 10px;
            background-color: yellow;
            border: 1px solid black;
            margin-bottom: 20px;
        }

        .equation {
            font-size: 1.5em;
            margin: 20px 0;
        }

        .box-row {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        .box {
            width: 50px;
            height: 50px;
            border: 2px solid black;
            margin: 0 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
        }

        .box.space {
            border: none;
            background: none;
        }

        .box.blue {
            background-color: lightblue;
        }

        .box.dark-blue {
            background-color: deepskyblue;
        }

        .draggable {
            width: 50px;
            height: 50px;
            border: 2px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 5px;
            font-size: 1.2em;
            cursor: grab;
        }

        .draggable.light-blue {
            background-color: lightblue;
        }

        .draggable.dark-blue {
            background-color: deepskyblue;
        }

        .draggable-container {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .draggable-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feedback {
            font-size: 1.2em;
            margin: 10px 0;
        }

        .feedback.correct {
            color: green;
        }

        .feedback.wrong {
            color: red;
        }
    </style>
</head>
<body>
    <div class="score-container">Score = ?</div>

    <div class="equation">2x + 1 = 9</div>
    <div class="box-row">
        <div class="box blue" id="box1"></div>
        <div class="box space"></div>
        <div class="box dark-blue" id="box2"></div>
        <div class="box space"></div>
        <div class="box blue" id="box3"></div>
        <div class="box space"></div>
        <div class="box dark-blue" id="box4"></div>
    </div>

    <div class="feedback" id="feedback1"></div>

    <div class="equation" id="equation2" style="display: none;">2x = 8</div>
    <div class="box-row" id="row2" style="display: none;">
        <div class="box blue" id="box5"></div>
        <div class="box space"></div>
        <div class="box dark-blue" id="box6"></div>
        <div class="box space"></div>
        <div class="box blue" id="box7"></div>
        <div class="box space"></div>
        <div class="box dark-blue" id="box8"></div>
    </div>

    <div class="feedback" id="feedback2" style="display: none;"></div>

    <div class="equation" id="equation3" style="display: none;">x = 4</div>
    <div class="feedback" id="finalFeedback" style="display: none; color: green;">Well done! You have solved the equation.</div>

    <div class="draggable-container">
        <div class="draggable-column">
            <div class="draggable light-blue" draggable="true" id="minus">-</div>
            <div class="draggable light-blue" draggable="true" id="plus">+</div>
            <div class="draggable light-blue" draggable="true" id="times">x</div>
            <div class="draggable light-blue" draggable="true" id="divide">รท</div>
        </div>
        <div class="draggable-column">
            <div class="draggable dark-blue" draggable="true" id="num1">1</div>
            <div class="draggable dark-blue" draggable="true" id="num2">2</div>
            <div class="draggable dark-blue" draggable="true" id="num3">3</div>
            <div class="draggable dark-blue" draggable="true" id="num4">4</div>
            <div class="draggable dark-blue" draggable="true" id="num5">5</div>
        </div>
        <div class="draggable-column">
            <div class="draggable dark-blue" draggable="true" id="num6">6</div>
            <div class="draggable dark-blue" draggable="true" id="num7">7</div>
            <div class="draggable dark-blue" draggable="true" id="num8">8</div>
            <div class="draggable dark-blue" draggable="true" id="num9">9</div>
            <div class="draggable dark-blue" draggable="true" id="num10">10</div>
        </div>
    </div>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        const boxes = document.querySelectorAll('.box');
        let score = 0;

        draggables.forEach(item => {
            item.addEventListener('dragstart', event => {
                event.dataTransfer.setData('text', event.target.id);
            });
        });

        boxes.forEach(box => {
            box.addEventListener('dragover', event => {
                event.preventDefault();
            });

            box.addEventListener('drop', event => {
                event.preventDefault();
                const data = event.dataTransfer.getData('text');
                const draggedElement = document.getElementById(data);

                if (validateDrop(box.id, draggedElement.id)) {
                    box.textContent = draggedElement.textContent;
                    box.classList.add('filled');
                    checkRowCompletion();
                } else {
                    document.getElementById(`feedback${getRow(box.id)}`).textContent = 'Try again';
                    document.getElementById(`feedback${getRow(box.id)}`).className = 'feedback wrong';
                }
            });
        });

        function validateDrop(boxId, draggedId) {
            const validPairs = {
                box1: 'minus',
                box2: 'num1',
                box3: 'minus',
                box4: 'num1',
                box5: 'divide',
                box6: 'num2',
                box7: 'divide',
                box8: 'num2'
            };
            return validPairs[boxId] === draggedId;
        }

        function checkRowCompletion() {
            if (areBoxesFilled(['box1', 'box2', 'box3', 'box4'])) {
                document.getElementById('feedback1').textContent = 'Correct';
                document.getElementById('feedback1').className = 'feedback correct';
                score += 5;
                updateScore();
                revealNextRow();
            }

            if (areBoxesFilled(['box5', 'box6', 'box7', 'box8'])) {
                document.getElementById('feedback2').textContent = 'Correct';
                document.getElementById('feedback2').className = 'feedback correct';
                score += 5;
                updateScore();
                revealFinalFeedback();
            }
        }

        function areBoxesFilled(ids) {
            return ids.every(id => document.getElementById(id).textContent !== '');
        }

        function updateScore() {
            document.querySelector('.score-container').textContent = `Score = ${score}`;
        }

        function revealNextRow() {
            document.getElementById('equation2').style.display = 'block';
            document.getElementById('row2').style.display = 'flex';
        }

        function revealFinalFeedback() {
            document.getElementById('equation3').style.display = 'block';
            document.getElementById('finalFeedback').style.display = 'block';
        }

        function getRow(boxId) {
            return boxId.startsWith('box1') || boxId.startsWith('box2') ? 1 : 2;
        }
    </script>
</body>
</html>
