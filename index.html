<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Solver</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .equation {
            font-size: 24px;
            margin: 20px 0;
        }

        .boxes {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        .box {
            width: 50px;
            height: 50px;
            border: 1px solid black;
            margin: 0 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
        }

        .spacer {
            width: 50px; /* Match the size of the box */
        }

        .draggable {
            background-color: blue;
            color: white;
            width: 50px;
            height: 50px;
            margin: 5px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            cursor: grab;
        }

        .hidden {
            visibility: hidden;
        }

        .feedback {
            font-size: 18px;
        }

        .correct {
            color: green;
        }

        .try-again {
            color: red;
        }

        .draggable-container {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .draggable-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>

    <div class="equation">2x + 1 = 9</div>
    <div class="boxes">
        <div class="box" data-box="minus"></div>
        <div class="box" data-box="one"></div>
        <div class="spacer"></div>
        <div class="box" data-box="minus"></div>
        <div class="box" data-box="one"></div>
    </div>
    <div class="feedback hidden" id="feedback-1"></div>

    <div class="equation hidden" id="equation-2">2x = 8</div>
    <div class="boxes hidden" id="boxes-2">
        <div class="box" data-box="divide"></div>
        <div class="box" data-box="two"></div>
        <div class="spacer"></div>
        <div class="box" data-box="divide"></div>
        <div class="box" data-box="two"></div>
    </div>
    <div class="feedback hidden" id="feedback-2"></div>

    <div class="equation hidden" id="equation-3">x = 4</div>
    <div class="feedback hidden" id="final-feedback">Well done! You have solved the equation.</div>

    <div class="draggable-container">
        <div class="draggable-column">
            <div class="draggable" draggable="true" data-value="-">-</div>
            <div class="draggable" draggable="true" data-value="+">+</div>
            <div class="draggable" draggable="true" data-value="x">x</div>
            <div class="draggable" draggable="true" data-value="\u00F7">&divide;</div>
        </div>
        <div class="draggable-column">
            <div class="draggable" draggable="true" data-value="1">1</div>
            <div class="draggable" draggable="true" data-value="2">2</div>
            <div class="draggable" draggable="true" data-value="3">3</div>
            <div class="draggable" draggable="true" data-value="4">4</div>
            <div class="draggable" draggable="true" data-value="5">5</div>
        </div>
        <div class="draggable-column">
            <div class="draggable" draggable="true" data-value="6">6</div>
            <div class="draggable" draggable="true" data-value="7">7</div>
            <div class="draggable" draggable="true" data-value="8">8</div>
            <div class="draggable" draggable="true" data-value="9">9</div>
            <div class="draggable" draggable="true" data-value="10">10</div>
        </div>
    </div>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        const boxes = document.querySelectorAll('.box');
        const feedback1 = document.getElementById('feedback-1');
        const feedback2 = document.getElementById('feedback-2');
        const equation2 = document.getElementById('equation-2');
        const equation3 = document.getElementById('equation-3');
        const boxes2 = document.getElementById('boxes-2');
        const finalFeedback = document.getElementById('final-feedback');

        let firstRowCorrect = { minus: false, one: false };
        let secondRowCorrect = { divide: false, two: false };

        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', () => {
                draggable.classList.add('dragging');
            });

            draggable.addEventListener('dragend', () => {
                draggable.classList.remove('dragging');
            });
        });

        boxes.forEach(box => {
            box.addEventListener('dragover', e => {
                e.preventDefault();
                const dragging = document.querySelector('.dragging');
                const value = dragging.dataset.value;
                const boxType = box.dataset.box;

                if ((boxType === 'minus' && value === '-') || (boxType === 'one' && value === '1')) {
                    box.textContent = value;
                    box.classList.add('filled');
                    firstRowCorrect[boxType] = true;

                    // Automatically fill other boxes in the row
                    if (boxType === 'minus') {
                        document.querySelectorAll('[data-box="minus"]').forEach(b => b.textContent = '-');
                    } else if (boxType === 'one') {
                        document.querySelectorAll('[data-box="one"]').forEach(b => b.textContent = '1');
                    }

                    // Check if both conditions are met
                    if (firstRowCorrect.minus && firstRowCorrect.one) {
                        feedback1.textContent = 'Correct';
                        feedback1.className = 'feedback correct';
                        setTimeout(() => {
                            equation2.classList.remove('hidden');
                            boxes2.classList.remove('hidden');
                        }, 1000);
                    }
                } else if ((boxType === 'divide' && value === 'รท') || (boxType === 'two' && value === '2')) {
                    box.textContent = value;
                    box.classList.add('filled');
                    secondRowCorrect[boxType] = true;

                    // Automatically fill other boxes in the row
                    if (boxType === 'divide') {
                        document.querySelectorAll('[data-box="divide"]').forEach(b => b.textContent = 'รท');
                    } else if (boxType === 'two') {
                        document.querySelectorAll('[data-box="two"]').forEach(b => b.textContent = '2');
                    }

                    // Check if both conditions are met
                    if (secondRowCorrect.divide && secondRowCorrect.two) {
                        feedback2.textContent = 'Correct';
                        feedback2.className = 'feedback correct';
                        setTimeout(() => {
                            equation3.classList.remove('hidden');
                            finalFeedback.classList.remove('hidden');
                        }, 1000);
                    }
                } else {
                    if (!box.classList.contains('filled')) {
                        feedback1.textContent = 'Try again';
                        feedback1.className = 'feedback try-again';
                    }
                }
            });
        });
    </script>
</body>
</html>
